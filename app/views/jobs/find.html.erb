<section id="hero" class="hero d-flex align-items-center text-dark">
  <div class="col mb-5 text-dark" data-aos="fade-up">
    <div class="card h-100">
      <h1>Find jobs</h1>
      <h3><%= link_to "Do you want to create a new job instead?", new_job_path %></h3>

      <div class="d-flex justify-content-center">
        <form action="<%= jobs_find_path %>" method="get" class="form-search d-flex align-items-stretch mb-3" data-aos="fade-up" data-aos-delay="200">
          <input type="text" class="form" placeholder="ZIP, city or keywords" name="query" style="height: 60px;">
          <!-- Filter by job type -->
          <select name="job_type" class="form-select" aria-label="Filter by job type">
            <option value="">All job types</option>
            <% @categories_list.each do |type| %>
              <option value="<%= type %>"><%= type %></option>
            <% end %>
          </select>
          <!-- Sort by -->
          <select name="sort_by" class="form-select" aria-label="Sort by">
            <option value="">Sort by relevance</option>
            <option value="salary_desc">Salary - High to Low</option>
            <option value="salary_asc">Salary - Low to High</option>
            <option value="date_desc">Date - Newest first</option>
            <option value="date_asc">Date - Oldest first</option>
          </select>
          <button type="submit" class="btn btn-primary">Search</button>
        </form>
      </div>

      <h2 class="text-dark">All available jobs </h2>
      <section class="py-5">
        <div class="container px-3 px-lg-5 mt-5">
          <div class="row gx-3 gx-lg-5 row-cols-2 row-cols-md-3 row-cols-xl-3 justify-content-center ">
            <% @jobs.each do |job| %>
              <% if job.public? %>
                <%= render "posting", job: job %>
              <% end %>
            <% end %>
          </div>
          <nav class="d-flex justify-content-center">
            <ul class="pagination">
              <% if @jobs.total_pages > 1 %>
                <% if @jobs.current_page > 1 %>
                  <li class="page-item">
                    <%= link_to '«', find_jobs_path(page: @jobs.current_page - 1, q: params[:q]), class: 'page-link' %>
                  </li>
                <% end %>
                <% @jobs.total_pages.times do |i| %>
                  <% if @jobs.current_page == i + 1 %>
                    <li class="page-item active"><%= link_to i + 1, '#', class: 'page-link' %></li>
                  <% else %>
                    <li class="page-item"><%= link_to i + 1, find_jobs_path(page: i + 1, q: params[:q]), class: 'page-link' %></li>
                  <% end %>
                <% end %>
                <% if @jobs.current_page < @jobs.total_pages %>
                  <li class="page-item">
                    <%= link_to '»', find_jobs_path(page: @jobs.current_page + 1, q: params[:q]), class: 'page-link' %>
                  </li>
                <% end %>
              <% end %>
            </ul>
          </nav>
        </div>
      </section>
    </div>
  </div>
</section>
<a href="#" class="scroll-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>
<div id="preloader"></div>
